<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.egemmerce.hc.repository.mapper.ItemMapper">

<!-- C :: 상품 등록 -->
<insert id="insertItem" parameterType="item">
	insert into item
		(i_reg_date, i_u_no, i_type, i_category_main, i_category_sub, i_used_status, 
		i_name, i_content, i_cool_price, i_auction_agree, i_auction_start_date, i_auction_end_date,
		i_auction_bid_price, i_origin_price)
	values
		(now(), #{iUNo}, #{iType}, #{iCategoryMain}, #{iCategorySub}, #{iUsedStatus},
		#{iName}, #{iContent}, #{iCoolPrice}, #{iAuctionAgree}, #{iAuctionStartDate}, #{iAuctionEndDate},
		#{iAuctionBidPrice}, #{iOriginPrice})
</insert>

<!-- R :: 상품 전체 조회 -->
<select id="selectItemSellList">
	select *
	  from item
</select>

<!-- R :: 상품 조회(판매/구매) -->
<select id="selectItemListByType" parameterType="string">
	select *
	  from item
	 where i_type=#{iType}
</select>

<!-- U :: 상품 업데이트(거래완료) -->
<update id="updateItemDealCompleted">
	update item
	   set i_completed = "true"
	 where i_no=#{iNo} and i_u_no = #{iUNo} and i_deal_u_no != 0 and i_deal_price != 0
</update>

<!-- D :: 상품 삭제 -->
<delete id="deleteItem" parameterType="int">
	delete
	  from item
	 where i_no = #{iNo}
</delete>

</mapper>